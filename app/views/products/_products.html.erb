<% if products.any? %>
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
    <% products.each do |product| %>
      <div class="col">
        <div class="card h-100 position-relative">

          <div class="position-absolute top-0 end-0 m-2">
            <%= link_to "â‹¯", product_path(product), class: "btn btn-sm btn-outline-secondary", data: { turbo: false } %>
          </div>

          <% if product.image_url.present? %>
            <img src="<%= product.image_url %>" class="card-img-top object-fit-cover" style="height: 200px;" />
          <% else %>
            <div class="d-flex align-items-center justify-content-center bg-light text-muted" style="height: 200px;">
              No image
            </div>
          <% end %>

          <div class="card-body d-flex flex-column text-center">
            <%= link_to "VIEW", product_path(product), class: "btn btn-outline-secondary btn-sm mb-3", data: { turbo: false } %>
            <h5 class="card-title mb-2"><%= product.name %></h5>
            <p class="card-text small text-muted"><%= truncate(product.description, length: 60) %></p>
            <p class="card-text small text-secondary">Tags: <%= product.tags %></p>
          </div>

          <div class="card-footer text-center fw-bold text-primary">
            $<%= number_with_precision(product.price, precision: 2) %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="mt-4 d-flex justify-content-center">
    <%= pagy_bootstrap_nav(@pagy, pagy_url: ->(page) { products_path(page: page) }).html_safe %>
  </div>
<% else %>
  <p class="text-center text-muted fst-italic mt-4">No matching products found.</p>
<% end %>
